{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "id": "https://reality.os/schema/tech_policy.schema.json",
  "title": "TECHPolicyDocument",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "policy_id": { "type": "string", "minLength": 1, "maxLength": 128 },
    "version": { "type": "string", "pattern": "[0-9]+\\.[0-9]+\\.[0-9]+" },
    "owner_did": { "type": "string", "pattern": "bostrom[0-9a-z]{3,64}" },
    "allowed_host_classes": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "string",
        "enum": ["CPU", "GPU", "EDGE_MCU", "TEE_RISCV"]
      }
    },
    "max_kwh_per_day": { "type": "number", "minimum": 0.0 },
    "max_device_hours_per_day": { "type": "number", "minimum": 0.0 },
    "jurisdiction_tags": {
      "type": "array",
      "items": { "type": "string" }
    },
    "integration_depth_limits": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "observer_max": { "type": "integer", "minimum": 0 },
        "analyst_max": { "type": "integer", "minimum": 0 },
        "actuator_max": { "type": "integer", "minimum": 0 }
      },
      "required": ["observer_max", "analyst_max", "actuator_max"]
    },
    "eco_targets": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "max_exergy_destruction_w": { "type": "number", "minimum": 0.0 },
        "max_wbgt_c": { "type": "number" },
        "min_heat_risk_adjusted_uptime": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 1.0
        }
      },
      "required": ["max_exergy_destruction_w", "max_wbgt_c"]
    }
  },
  "required": [
    "policy_id",
    "version",
    "owner_did",
    "allowed_host_classes",
    "max_kwh_per_day",
    "max_device_hours_per_day",
    "integration_depth_limits",
    "eco_targets"
  ]
}
